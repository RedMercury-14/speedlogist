# speedlogist
----
Актуальная версия на 14,08,2023
В форму создания/редактирования маршрута изменить данные на ввод паллет

----
18.09.2023
Добавлены новые столбцы в User
раширен rest 
изменена логика блокировки перевозчиков (появилась колонка block)
----
19.09.2023
 Добавлены поля в авто согланос техзаданию. 
 Не сделана обработка персональныъх данных
 Не сделана защита BF
----
 20.09.2023
 Добавлены формы регистраций международных и региональных перевозок
 Иногда регистрация не срабатывает. 
 Не сделана обработка персональныъх данных
 Не сделана защита BF
 сохраняет доки в отдельные папки
----
 21.09.2023
 Полностью готова регистрация с сохранением изображения
 Не сделана обработка персональныъх данных
 Не сделана защита BF
 ----
 21.09.2023
 Доработана регистрация с сохранением изображения
 Не сделана обработка персональныъх данных
 Не сделана защита BF
----
 02.10.2023
 Окончатенльно сделана регистрация с сохранение изображений
 Сделано добавление машин и водтелей прямо в таблицу маршрутов (в выподающем меню)
 Изменена форма и таблица текущих тендеров для перевозчиков
 !! добавлена в БД строка date_registration в таблице user
----
25.10.2023
Большое обновление.
Добавлена возможность создавать заявки и создавать маршруты по заявкам.
Отслеживание статуса марщрута по привязанной заявке
Реализована отправка сообщений через SMTP в отдельном потоке (тестово)
----
09.11.2023  
Полность рабочий маршрутизатор по точкам, по загрузке файла excel  
Фикс багов:
- вместо одного акта, с названием act, акты записываются по названию юрлицаю
- кеш системных сообщений записывается в others/hasmap.ser и при запуске обновляется из этого файла.

При каждой новой заявке или принятии маршрута - этот файл перезаписывается  
Добавлена новая конфигурация `<property name="preferredTestQuery" value="select 1"/>`, которая должна предотавратить дедлок при использовании пула соединений.  
Добавлен список авто и подтверждение авто. Фото с техпаспортами отправляется на почту  
----
13.11.2023  
Добавлено поле адрес в маршрутизатор.  
Сделано необезательным поле серии при регистрации.
----
15.11.2023  
Добавлена возможность формирования отчёта как того требует рассчётник под excel (для Оли)  
Теперь точки загрузок и выгрузок могут изменять порядок и кол-во.  
изменения в БД: теперь order к route имеет обратную связь, т.к. один маршрут имеет много ордеров!
Изменение в БД вносились вручную!  
Объект route теперь вытягивает все заявки и адреса из бд!  
----
19.11.2023  
В catalina.sh добавлена сл. параметр `JAVA_OPTS= "$JAVA_OPTS -Xms4g -Xmx4g -XX:-HeapDumpOnOutOfMemoryError"`  
Добавлены два запроса /dev/heap и /dev/getError для отладок.  
Вернул назад `<property name="maxIdleTime" value="30" />`  
память увеличилась до 4 гигов  
[Документация по настройке tomcat](https://www.labkey.org/Documentation/wiki-page.view?name=configwebappmemory#:~:text=The%20Tomcat%20server%20is%20run,4GB%20for%20a%20production%20server.)  
[Полезная статья](https://for-each.dev/lessons/b/-java-heap-dump-capture)
----
30.11.2023  
Добавлен экспорт в excel таблицы с тендерами.  
Не затронуто формирование отчётов.  
Облегчены все вьюхи  
Добавлен телеграмм-бот. По дефолту запускается через main страницу.  
Добавлен route map для новичков
----
13.12.2023  
Экспорт в excel работает некорректно, поправить потом. Возможно из-за того, что содержатся null значения в датах.   
Отчёты формируются в PDF, если не умещается на один лист - формируется 2 отчёта.  
Добавлены исправления в order когда сформирован маршрут.  
Тестово увелечина помять до 6 гигов `JAVA_OPTS= "$JAVA_OPTS -Xms6g -Xmx6g -XX:-HeapDumpOnOutOfMemoryError"`  
Практика показала что дамп работает не корректно, не полностью формирует файл  
В маршрутизатор дабавлены статические полигоны в Могилёв и Гомель. Полигоны можно рисовать, но они не сохратяются (в разработке)  
----
20.12.2023   
Реализованы полностью рабочие полигоны (зоны) на карте.  
2 вида, запрет и ограничение (удаление и добавление)  
Полигоны храняться в polygon.ser  
Добавлен свидетель настроеный на заход каталины, с отправкой письма на почту!  
Первая версия оптимизатора (ссыль отключена)